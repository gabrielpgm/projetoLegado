<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Cliente</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <div id="cx-extcad">
        <h1>{{ 'Editar Cliente' if modo == 'editar' else 'Cadastro de Cliente' }}</h1>
            <fieldset>
                <label for="numero_identificador">Número Identificador:</label>
                <input type="text" id="numero_identificador" name="numero_identificador" value="{{ cliente.numero_identificador if cliente else '' }}" disabled><br><br>     
            </fieldset>

        <div id="cx-intcad"> 
                

            <form action="{% if cliente %}{{ url_for('editar_cliente', numero_identificador=cliente.numero_identificador) }}{% else %}{{ url_for('cadastro_cliente') }}{% endif %}" method="POST" enctype="multipart/form-data">
                
                <fieldset class="custom-fieldcad">
                    <label for="nome">Nome:</label>
                    <input type="text" id="nome" name="nome" value="{{ cliente.nome }}" required><br><br>
                    <label for="cpf">CPF:</label>
                    <input type="text" id="cpf" name="cpf" value="{{ cliente.cpf if cliente else '' }}" required oninput="formatarCpf(event)"><br><br>
                </fieldset>
            
                <fieldset class="custom-fieldcad">
                    <legend>Documentos</legend>
                        <div class="document-row">
                            <div class="document-column">
                                <label for="identidade">Identidade:</label>
                                
                                    <div class="input-group">
                                        <input type="file" id="identidade" name="identidade" accept="*" style="display: none;" onchange="updateFileName(this)">
                                    </div>
                                    
                                    <!-- Novo contêiner para os botões -->
                                    <div class="button-container">

                                        <button type="button" onclick="document.getElementById('identidade').click();" class="custom-fieldcad button">
                                            <i class="fas fa-file-upload fa-2x"></i> 
                                            Selecionar
                                        </button>
                                                                                
                                        <button type="button" onclick="capturarImagem('identidade')" class="custom-fieldcad button">
                                            <i class="fas fa-camera fa-2x"></i>
                                            Capturar
                                        </button>
                                    
                                    </div>
                            
                                <span>Arquivo: {{ cliente.documentos.identidade.arquivo if cliente and cliente.documentos and cliente.documentos.identidade else 'Nenhum arquivo enviado' }}</span>
                                <br><br>
                                <label for="comentario_identidade">Comentário:</label>
                                <input type="text" id="comentario_identidade" name="comentario_identidade" value="{{ cliente.documentos.identidade.comentario if cliente and cliente.documentos and cliente.documentos.identidade else '' }}">
                            </div>
                            
                            
                            <div class="document-column">
                                <label for="cnh">CNH:</label>

                                    <div class="input-group">
                                        <input type="file" id="cnh" name="cnh" accept="*" style="display: none;" onchange="updateFileName(this)">
                                    </div>
                                    
                                    <!-- Novo contêiner para os botões -->
                                    <div class="button-container">
                                        <button type="button" onclick="document.getElementById('cnh').click();" class="custom-fieldcad button">
                                            <i class="fas fa-file-upload fa-2x"></i> 
                                            Selecionar
                                        </button>
                                                                                
                                        <button type="button" onclick="capturarImagem('cnh')" class="custom-fieldcad button">
                                            <i class="fas fa-camera fa-2x"></i>
                                            Capturar
                                        </button>
                                    </div>
                                
                                <span>Arquivo: {{ cliente.documentos.cnh.arquivo if cliente and cliente.documentos and cliente.documentos.cnh else 'Nenhum arquivo enviado' }}</span>
                                <br><br>
                                <label for="comentario_cnh">Comentário:</label>
                                <input type="text" id="comentario_cnh" name="comentario_cnh" value="{{ cliente.documentos.cnh.comentario if cliente and cliente.documentos and cliente.documentos.cnh else '' }}">
                            </div>
                        </div>
                
                    <div class="document-row">
                        <div class="document-column">
                            <label for="comprovante_endereco">Comprovante de Endereço:</label>

                            <div class="input-group">
                                <input type="file" id="comprovante_endereco" name="comprovante_endereco" accept="*" style="display: none;" onchange="updateFileName(this)">
                            </div>
                            
                            <!-- Novo contêiner para os botões -->
                            <div class="button-container">
                                <button type="button" onclick="document.getElementById('comprovante_endereco').click();" class="custom-fieldcad button">
                                    <i class="fas fa-file-upload fa-2x"></i> 
                                    Selecionar
                                </button>
                                                                        
                                <button type="button" onclick="capturarImagem('comprovante_endereco')" class="custom-fieldcad button">
                                    <i class="fas fa-camera fa-2x"></i>
                                    Capturar
                                </button>
                            </div>
                            
                            <span>Arquivo: {{ cliente.documentos.comprovante_endereco.arquivo if cliente and cliente.documentos and cliente.documentos.comprovante_endereco else 'Nenhum arquivo enviado' }}</span>
                            <br><br>
                            <label for="comentario_comprovante">Comentário:</label>
                            <input type="text" id="comentario_comprovante" name="comentario_comprovante" value="{{ cliente.documentos.comprovante_endereco.comentario if cliente and cliente.documentos and cliente.documentos.comprovante_endereco else '' }}">
                        </div>
                        <div class="document-column">
                            <label for="outro">OUTRO:</label>

                            <div class="input-group">
                                <input type="file" id="outro" name="outro" accept="*" style="display: none;" onchange="updateFileName(this)">
                            </div>
                            
                            <!-- Novo contêiner para os botões -->
                            <div class="button-container">
                                <button type="button" onclick="document.getElementById('outro').click();" class="custom-fieldcad button">
                                    <i class="fas fa-file-upload fa-2x"></i> 
                                    Selecionar
                                </button>
                                                                        
                                <button type="button" onclick="capturarImagem('outro')" class="custom-fieldcad button">
                                    <i class="fas fa-camera fa-2x"></i>
                                    Capturar
                                </button>
                            </div>
                            
                            <span>Arquivo: {{ cliente.documentos.outro.arquivo if cliente and cliente.documentos and cliente.documentos.outro else 'Nenhum arquivo enviado' }}</span>
                            <br><br>
                            <label for="comentario_outro">Comentário:</label>
                            <input type="text" id="comentario_outro" name="comentario_outro" value="{{ cliente.documentos.outro.comentario if cliente and cliente.documentos and cliente.documentos.outro else '' }}">
                        </div>
                    </div>
                </fieldset>
                

                <button type="submit">Salvar</button>
            </form>        

        </div>
        
    </div>
    

    <!-- Botão para voltar ao dashboard -->
    <form action="/busca_cliente" method="GET">
        <button type="submit">Voltar</button>
    </form>

    <!-- CPF inválido -->
    {% if cpf_invalido %}
        <script>
            cpfInvalido();
        </script>
    {% endif %}

    <!-- CPF duplicado -->
    {% if cpf_duplicado %}
        <script>
            cpfDuplicado();
        </script>
    {% endif %}
</body>
</html>
